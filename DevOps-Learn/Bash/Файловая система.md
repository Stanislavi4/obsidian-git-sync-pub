Содержание

1. 1. [Что такое файловая система и зачем она нужна](https://blog.skillfactory.ru/glossary/faylovaya-sistema/#что-такое-файловая-система-и-зачем-она-нужна)
2. 2. [Что такое кластеры и что они означают](https://blog.skillfactory.ru/glossary/faylovaya-sistema/#что-такое-кластеры-и-что-они-означают)
3. 3. [Какие бывают файловые системы](https://blog.skillfactory.ru/glossary/faylovaya-sistema/#какие-бывают-файловые-системы)
4. 4. [Как изменить файловую систему](https://blog.skillfactory.ru/glossary/faylovaya-sistema/#как-изменить-файловую-систему)
5. 5. [Какая файловая система лучше](https://blog.skillfactory.ru/glossary/faylovaya-sistema/#какая-файловая-система-лучше)

Файловая система — это способ хранить и организовывать информацию на каком-нибудь носителе. От файловой системы зависит, как файлы будут кодироваться, храниться на диске и читаться компьютером. У каждой [операционной системы](https://blog.skillfactory.ru/glossary/operaczionnaya-sistema/) свой тип организации файлов, то есть своя файловая система.

Без файловой системы (ФС) не сможет работать ни один компьютер: благодаря ей файлы могут храниться на устройстве, их можно читать и сохранять. Файловая система есть на каждом жестком диске, SSD-накопителе или флешке.

## Что такое файловая система и зачем она нужна

Файл — это блок информации, записанный на накопитель. Не всегда эта информация записана последовательно, иногда физически части одного и того же файла могут находиться в разных секторах жесткого диска. Чтобы знать, что где хранится, у системы есть файловая таблица: там приведена информация обо всех файлах.

**Файловая система определяет, как организовать эту таблицу. Способы разные в зависимости от** [**ОС**](https://blog.skillfactory.ru/glossary/operaczionnaya-sistema/)**, поэтому у разных операционных систем различаются и файловые системы.**

Вот что еще делает файловая система:

- определяет, какого размера будут кластеры — блоки информации, на которые делится файл;
- соединяет «кусочки» информации из разных кластеров в единые файлы;
- обеспечивает прикладным программам доступ к файлам;
- отслеживает, какие ячейки памяти сейчас свободны, заняты или недоступны;
- оптимизирует чтение и запись файлов, сжимает и [кэширует](https://blog.skillfactory.ru/glossary/cache/);
- следит за целостностью и защищенностью файлов, создает точки восстановления;
- хранит информацию о файлах, в том числе название, размер и дату создания.

Иными словами, без файловой системы не получилось бы работать с файлами. Она управляет хранилищем и делает разрозненную информацию в нем понятной для операционной системы и прикладного [ПО](https://blog.skillfactory.ru/glossary/programmnoe-obespechenie/).

## Что такое кластеры и что они означают

Файловая система определяет, как будут организованы кластеры в памяти устройства. Расскажем, что это такое: так легче понять, что именно делает ФС.

Для человека файл — единая конструкция. Но для компьютера все иначе. Он хранит информацию в виде множества маленьких наборов данных, то есть кластеров. Когда файл записывается на диск, он разделяется на несколько частей по размеру этих кластеров и хранится в таком виде. Например, если размер кластера — 4 Кб, а файл весит 10 Кб, он займет три кластера. В третьем будет храниться только 2 Кб, но даже такие кластеры считаются занятыми полностью.

Обычно кластер весит несколько [байт](https://blog.skillfactory.ru/glossary/bit/), а сколько конкретно — зависит от размера диска и от настроек. Когда человек настраивает файловую систему, он может выбрать и размер кластера:

- **если кластер сделать меньше рекомендованного, на накопитель поместится больше файлов.** Ведь тогда не будет ситуаций, когда кластер фактически заполнен лишь частично — все пространство окажется задействовано;
- **если увеличить размер кластера, доступ к файлам будет быстрее.** Файлы будут делиться на меньшее количество частей. Компьютеру придется обращаться к меньшему количеству кластеров — это увеличит скорость.

Файловая система управляет кластерами, тем, как они будут записываться и храниться, как между ними будут организованы связи. Она же разделяет и распределяет файлы по кластерам, управляет записью и чтением.

## Какие бывают файловые системы

Файловых систем существуют десятки. Некоторые используются очень широко, другие встречаются только в специализированной технике. Мы рассмотрим несколько самых популярных, тех, с которыми можно встретиться при работе с обычными компьютерами.

**FAT (File Allocation Table).** Самый популярный вариант этой файловой системы — FAT32. Она довольно старая, сегодняшняя версия появилась еще в 90-х. Тогда еще не было таких больших файлов и накопителей, как сейчас, и это отразилось на ее особенностях:

- максимальный размер файла в файловой системе FAT32 — 4 Гб. Более крупные файлы вроде длинных видеозаписей записать в нее не получится;
- система быстро работает с большими файлами, но медленнее справляется со множеством маленьких;
- изнутри структура системы представляет собой иерархическую таблицу с данными. Есть три раздела — служебный для системных файлов, таблица указателей для поиска данных и собственно пространство для данных;
- в FAT32 нет современных механизмов [шифрования](https://blog.skillfactory.ru/glossary/shifrovanie/) и защиты данных.

Для современных ОС FAT32 не подходит. При этом система быстрая, с ней удобно работать, ее распознают и читают почти все устройства. Поэтому сейчас ее применяют в основном для флешек и карт памяти.

**exFAT (extended FAT).** Это «расширенная FAT», которую придумала Microsoft для флешек и внешних жестких дисков. Система похожа на FAT, но усовершенствована, в ней можно хранить более крупные файлы. Еще в нее добавили кэширование и возможность управлять правами доступа. Но эта файловая система проприетарная и долгое время была закрытой — ей пользовались с опаской. Случилось даже несколько споров из-за авторских прав. А еще ее поддерживают не все операционные системы, например, с [Linux](https://blog.skillfactory.ru/glossary/linux/) могут возникнуть сложности.

**NTFS и ReFS (New Technology File System, Resilient File System).** Файловые системы от компании Microsoft, которые по умолчанию используются для операционных систем Windows. Под управлением NTFS работают практически все версии Windows, кроме самых новых, где применяется более современная ReFS. 

- В NTFS есть логирование, то есть сведения об операциях с файлами записываются в специальный лог.
- Система может работать с большими файлами, но имя файла должно быть не больше 255 символов.
- Изнутри ФС выглядит как бинарное дерево: древовидная [структура данных](https://blog.skillfactory.ru/glossary/struktura-dannyh/) облегчает поиск нужной информации.
- Есть шифрование данных, кэширование и система защиты целостности: любые операции с файлами либо идут до конца, либо полностью отменяются. То есть, если посреди записи файла вдруг выключится компьютер — «битой» информации не будет, запись просто отменится целиком. 

ReFS — это новая версия NTFS, которая раньше применялась в [серверных](https://blog.skillfactory.ru/glossary/server/) версиях Windows. Сейчас ее поддержка есть в Windows 8.1 и в Windows 10. Она лучше справляется с восстановлением поврежденных файлов, поддерживает более длинные имена и выдерживают большую нагрузку. Но это не замена NTFS: ReFS не поддерживает несколько важных функций NTFS, например шифрование всего раздела или жесткие ссылки. Поэтому сейчас ее используют как вспомогательную.

**EXT (Extended File System).** Чаще всего говорят про EXT4 — четвертое поколение этого вида файловых систем. Но сейчас можно встретить несколько поколений, начиная с EXT2. В основном эти файловые системы используются в ОС Linux и мобильных системах [Android](https://blog.skillfactory.ru/glossary/android/). 

- EXT начиная с EXT3 — журналируемые системы, это значит, что все происходящие на накопителе изменения записываются в специальный журнал. Поэтому система считается довольно стабильной.
- Информация в EXT хранится в битовых картах, то есть последовательностях из битов. А содержимое папок представлено в виде древовидных структур и связных списков.
- В EXT4 добавили экстенты — новый способ записи информации в непрерывные области на диске. Этот способ повышает производительность и скорость.

Прочитать данные с EXT может почти любая современная ОС, но в качестве системной она обычно используется с Linux и Android. Кстати, именно из-за разных файловых систем на карты памяти для телефонов нельзя установить приложения. Ведь в системе — EXT4, а на карте памяти — FAT32.

**HFS+, APFS (Hierarchical File System Plus, Apple File System).** Это системы, которые используются в устройствах Apple с операционными системами macOS и [iOS](https://blog.skillfactory.ru/glossary/ios/). HFS+ — иерархическая и более старая, APFS современнее и поддерживает больше возможностей: быстрее, надежнее, лучше защищает и шифрует файлы. В новых macOS и iOS используется именно она. Для серверных систем применяется еще и кластерная ФС Apple Xsan: она специально разработана для работы с сетями из нескольких устройств.

**Другие.** Существует много других файловых систем. Самый большой выбор тут у пользователей Linux, которым, кроме EXT, доступно еще минимум пять ФС:

- JFS — очень стабильная и надежная файловая система, которая потребляет минимум мощностей;
- XFS — быстро работает с крупными файлами и легко расширяет разделы, но более чувствительна к потере данных;
- ReiserFS — существует только для Linux, в ней удобно работать с данными, но можно потерять информацию при аварийном отключении;
- Btrfs — удобная в администрировании система для OpenSUSE и SUSE Linux.

А еще есть ZFS с объединенным хранилищем и снапшотами состояния файлов, изначально доступная только для операционных систем BSD и Solaris. Есть виртуальные и сетевые файловые системы — вариантов много, но это уже более узкоспециализированные решения.

## Как изменить файловую систему

**Форматирование.** Чтобы изменить способ организации файлов, нужно отформатировать накопитель. Обычно это можно сделать через компьютер. Например, в Windows нужно открыть «Мой компьютер / Этот компьютер», выбрать нужный диск или флешку и в контекстном меню нажать на вариант «Форматировать».

Компьютер предложит выбрать, в какую файловую систему отформатировать накопитель, каким будет размер кластера и тип форматирования. Нужно указать интересующие варианты и запустить форматирование — сколько оно будет длиться, зависит от размера диска.

**Важно: при форматировании все файлы на устройстве удаляются. Поэтому сначала нужно скопировать информацию с диска или флешки в надежное место. А еще не стоит форматировать изнутри системы диск, на котором эта система установлена.**

**Установка ОС.** Если человек устанавливает на компьютер новую операционную систему, ему понадобится перекодировать файловую систему так, чтобы она подходила к ОС. Если систем на компьютере планируется несколько, для каждой нужно выделить свой раздел жесткого диска с соответствующей файловой системой. Это можно сделать при установке ОС или изнутри уже установленной операционной системы.

_Например, у человека в компьютере установлен жесткий диск на 500 Гб. Диск один, а на компьютере стоит ОС Windows. Файловая система на этом диске — NTFS. Если человек хочет установить на компьютер еще и Linux, он должен выделить на диске отдельный раздел, отформатировать его под файловую систему EXT4, а потом установить в этом разделе Linux. Создать и отформатировать раздел можно из панели управления Windows или при установке новой операционной системы._

## Какая файловая система лучше

У всех систем есть свои сильные и слабые места. Идеальной файловой системы нет, но есть те, которые лучше или хуже подходят для определенных ОС, целей и технологий. Например, FAT32 читают практически все ОС, но для системного диска она не подойдет из-за ограничения на размер файла.

А еще некоторые операционные системы по умолчанию работают с определенными файловыми системами. Если выбрать для них другую ФС, могут возникнуть ошибки или система попросту не установится. Так что иногда выбирать не приходится.

Если вы хотите узнать больше о том, как устроены компьютеры и операционные системы, можно записаться на курсы. Получите новый опыт и новую профессию в сфере IT.