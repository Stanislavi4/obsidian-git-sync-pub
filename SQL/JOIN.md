Содержание

1. 1. [Кто пользуется оператором JOIN](https://blog.skillfactory.ru/glossary/join-sql/#кто-пользуется-оператором-join)
2. 2. [Для чего нужен оператор JOIN](https://blog.skillfactory.ru/glossary/join-sql/#для-чего-нужен-оператор-join)
3. 3. [Как работает JOIN](https://blog.skillfactory.ru/glossary/join-sql/#как-работает-join)
4. 4. [Варианты работы команды JOIN](https://blog.skillfactory.ru/glossary/join-sql/#варианты-работы-команды-join)
5. 5. [Как начать работать с SQL-запросами](https://blog.skillfactory.ru/glossary/join-sql/#как-начать-работать-с-sqlзапросами)

JOIN — это команда в языке запросов [SQL](https://blog.skillfactory.ru/glossary/sql/) (Structured Query Language), необходимом для работы с базами данных. Объединяет данные из двух разных таблиц в базе. Цель использования команды — получить нужное подмножество данных.

Командой JOIN в SQL пользуются очень часто, она одна из наиболее важных. В реляционных базах данных информация распределена по таблицам, а большая часть работы с базами подразумевает поиск в них нужных сведений. Для этого используются разные команды, и JOIN — одна из них.

Применение команды можно сравнить с использованием фильтра по товарам в интернет-магазине: разработчик выбирает определенное подмножество с помощью настроенных запросов. Обычно JOIN используется в блоках SELECT, которые «выбирают» из базы таблицы и записи, отвечающие нужным критериям.

## Кто пользуется оператором JOIN

В основном SQL-запросы используют администраторы баз данных и бэкенд-разработчики — люди, работа которых подразумевает получение сведений из базы. Но понимание работы JOIN важно и представителям других профессий, так как базовые знания SQL необходимы в любом проекте, — например, сотрудникам технической поддержки, контент-менеджерам, SEO-специалистам и другим.

## Для чего нужен оператор JOIN

- Для «умного» поиска по таблицам в рамках одной базы данных. Использование разных режимов работы оператора помогает отфильтровать сведения по определенным критериям.
- Для быстрого отсечения информации, которая не нужна в рамках конкретного запроса.
- Для соединения двух таблиц в одну, например, чтобы отправить полученную информацию единым блоком.

## Как работает JOIN

Изначально JOIN — бинарный оператор, то есть он работает с двумя переданными объектами. На практике современные реализации могут воспринимать и больше двух таблиц, просто операция в таком случае выполняется несколько раз.

Оператору передаются таблицы, которые нужно объединить, и критерий для объединения — логическое выражение, которое называется ключом. В процессе работы JOIN таблицы проверяются на соответствие этому критерию. Например, значение поля ID в одной таблице должно соответствовать полю ID в другом. Оператор проверит строки обеих таблиц и выберет пары строк, где ID совпадают.

Найденные результаты объединяются в одну таблицу. Две соответствующие друг другу разные строки преобразуются в одну — это важнейшее условие работы JOIN. Строки чаще всего из разных таблиц, но это не обязательно. Главная особенность JOIN — объединение двух объектов в один.

## Варианты работы команды JOIN

Выше мы написали, что у JOIN есть разные режимы работы. Они дают разные результаты; различаются и ситуации, в которых они могут пригодиться. Чаще всего выделяют четыре режима SQL JOIN: Inner, Outer, Self и Cross.

Особенности работы легче всего объяснить с помощью диаграмм Венна, которые также называют кругами Эйлера. На них множества представляются как круги, а объекты, которые относятся к обоим множествам, — как пересечения этих кругов.

### Inner Join

Это самый простой и часто используемый вариант команды — внутреннее объединение. Если режим работы операции не указан вручную, то SQL автоматически воспримет любой JOIN как внутренний.

Оператору передаются две таблицы, и он возвращает их внутреннее пересечение по какому-либо критерию. Результатом будут записи, которые соответствуют обеим таблицам, — их перед отправкой объединят.

![вариант команды Inner Join](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-1-9028229.png)

Inner Join

Например, если в одной таблице будут перечислены черные животные, а в другой — собаки, то Inner Join вернет одну таблицу с перечислением черных собак. Столбцы будут «склеены» друг с другом, несмотря на то что в базе данные хранятся в разных таблицах. Это похоже на бинарное «и» из алгебры логики.

Внутреннее соединение используется чаще всего.
### Outer Join

Второй распространенный вариант — внешнее соединение. Если внутреннее объединение имеет сходство с бинарным «и», то внешнее — несколько вариаций бинарного «или». Такой JOIN более гибкий, он возвращает не только строгое пересечение между двумя таблицами, но и отдельные элементы, которые принадлежат только одному из множеств. Какому — зависит от типа.

**Left Join.** Возвращает пересечение множеств и все элементы из левой таблицы. Например, человек хочет посмотреть кино, но на русский фильм согласен, только если это боевик. Фильтр вернет ему все фильмы из множества «боевики», фильмы из подмножества «русские боевики», но других фильмов из множества «русские» там не будет.

![вариант команды Left Join](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-2-7083435.png)

Left Join

**Right Join.** Работает по тому же принципу, но вместо левой таблицы — правая. То есть человек получит в результатах боевики, только если они русские.

![вариант команды Right Join](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-3-2366202.png)

Right Join

**Join Full.** Возвращает обе таблицы, объединенные в одну. Например, человек хочет увидеть список из всех боевиков и всех русских фильмов, без исключений.

![вариант команды Join Full](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-4-5225590.png)

Join Full

### Outer Join с NULL

Это не отдельный метод, мы описали его отдельно от остальных только для наглядности. Это тот же самый Outer Join, но с дополнительным параметром, который убирает из результатов поиска пересечение категорий. Это противоположность Inner Join.

**Left Join с NULL.** Возвращает данные из левой таблицы, но без пересечений с правой. Человеку покажутся все боевики, но русского кино и в частности русских боевиков среди них не будет.

![вариант команды Left Join с NULL](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-5-3165767.png)

Left Join с NULL

**Right Join с NULL.** Соответственно, работает так же, но по отношению к «правой», второй таблице.

![вариант команды Right Join с NULL](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-6-5830438.png)

Right Join с NULL

**Join Full с NULL.** Работает как исключающее «или». Он тоже возвращает результат из обеих таблиц, кроме пересечений. Покажутся все русские фильмы и все боевики, а вот кино из подмножества «русские боевики» в результате не будет.

![вариант команды Join Full с NULL](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-7-8641786.png)

Join Full с NULL

Как и с любым JOIN, результаты перед отправкой объединяются в одну таблицу.

### Cross Join

Его еще называют перекрестным. Это своеобразный вариант соединения, который нужен не так часто, но важен для понимания. Он возвращает декартово произведение — собираются все возможные пары из обеих таблиц. В отличие от остальных режимов, Cross Join не требует указания дополнительной информации.

Стандартное обращение к двум таблицам тоже покажет декартово произведение. Cross Join отличается от простого вызова двух таблиц тем, что они объединяются в одну.

В виде диаграммы Венна это соединение представить невозможно. Скорее можно объяснить его на примере математики. Например, в одном наборе десять чисел, в другом — пять. Cross Join между этими наборами — это все возможные комбинации сумм двух чисел из разных наборов. Результат будет выглядеть как таблица 11×5, где в каждой ячейке лежит своя сумма.

![вариант команды Cross Join](https://blog.skillfactory.ru/wp-content/uploads/2023/02/join-8-5013003.png)

Cross Join

В разработке Cross Join может использоваться при создании тех же фильтров в интернет-магазине. Например, человек ищет обувь по характеристикам «тип» и «размер» — должны быть выведены все возможные комбинации типа с размером.

### Self Join

Это «самосоединение», объединение внутри одной таблицы. Оно используется тогда, когда у разных полей одной таблицы могут быть одинаковые значения. Например, один и тот же участник музыкальной группы может быть и вокалистом, и, например, клавишником. Если из базы музыкальных групп понадобится извлечь те, где вокалист и клавишник — одно лицо, потребуется Self Join.

Эта вариация может быть и внутренней, и внешней. Ее отличие в том, что таблица при таком режиме присоединяется сама к себе. Без практики это может быть непривычно, но в процессе использования логику работы легко понять.

Чтобы Self Join работал правильно, могут потребоваться псевдонимы таблиц: они помогают называть одну и ту же таблицу разными именами. В результате оператор «воспринимает» переданные сущности как разные.

## Как начать работать с SQL-запросами

Для начала работы с SQL-запросами требуется [СУБД](https://blog.skillfactory.ru/glossary/subd/) — система для управления базами данных. Начинающие обычно выбирают [MySQL](https://blog.skillfactory.ru/glossary/mysql/): она простая в освоении, мало весит и распространяется бесплатно.

С помощью СУБД можно создать базу и управлять ей, модифицировать данные и пр. Можно работать с разными операциями, включая JOIN. Удаленный сервер не обязателен: есть программные решения, позволяющие «поднять» серверную часть на том же устройстве. На «сервере» находится хранилище данных, а запросы поступают от «клиента».